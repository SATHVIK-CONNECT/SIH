<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üåæ FARMA AI: Your Multilingual Farming Assistant</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f0f4f7;
        background-image: url("https://i.imgur.com/gK9tHqL.jpeg");
        background-size: cover;
        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
      }
      .chatbot-container {
        width: 100%;
        max-width: 450px;
        height: 600px;
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      .chatbot-header {
        background-color: #3b823b;
        color: white;
        padding: 18px;
        text-align: center;
        font-size: 1.2em;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .language-select {
        padding: 5px;
        border-radius: 8px;
        border: 1px solid #c5d8a8;
        background-color: #e6f3e6;
        color: #3b823b;
        font-size: 0.8em;
        cursor: pointer;
      }
      .chatbot-messages {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      .message {
        max-width: 80%;
        padding: 12px;
        border-radius: 20px;
        line-height: 1.4;
      }
      .bot-message {
        background-color: #e6f3e6;
        color: #333;
        align-self: flex-start;
      }
      .user-message {
        background-color: #d1e7dd;
        color: #333;
        align-self: flex-end;
      }
      .image-preview-container img {
        max-width: 100%;
        border-radius: 10px;
        border: 1px solid #ddd;
        margin-top: 8px;
      }
      .chatbot-input {
        display: flex;
        padding: 15px;
        border-top: 1px solid #e0e0e0;
        background-color: #f7f7f7;
        gap: 10px;
      }
      #user-input {
        flex: 1;
        border: 1px solid #ccc;
        border-radius: 25px;
        padding: 12px 18px;
        outline: none;
      }
      .input-buttons {
        display: flex;
        gap: 10px;
      }
      .input-buttons button,
      .file-upload-label {
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        font-size: 1.2em;
      }
      #image-upload {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="chatbot-container">
      <div class="chatbot-header">
        <h3>FARMA AI ü§ñ</h3>
        <select class="language-select" id="language-select">
          <option value="en" selected>English</option>
          <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
          <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
          <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
          <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
          <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
          <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
          <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</option>
          <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</option>
          <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
          <option value="ur">ÿßÿ±ÿØŸà (Urdu)</option>
        </select>
      </div>
      <div class="chatbot-messages" id="chatbot-messages"></div>
      <div class="chatbot-input">
        <input type="text" id="user-input" placeholder="Ask a question or describe a problem..." />
        <div class="input-buttons">
          <button id="voice-button" title="Start voice search">üé§</button>
          <input type="file" id="image-upload" accept="image/*" />
          <label for="image-upload" class="file-upload-label" title="Upload an image">üñº</label>
          <button id="send-button" title="Send message">‚û°</button>
        </div>
      </div>
    </div>

    <script>
      const botMessages = {
        greeting: {
          en: "Hello! I am FARMA AI, your multilingual farming assistant.",
          hi: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§´‡§æ‡§∞‡•ç‡§Æ‡§æ ‡§è‡§Ü‡§à ‡§π‡•Ç‡§Å, ‡§Ü‡§™‡§ï‡§æ ‡§¨‡§π‡•Å‡§≠‡§æ‡§∑‡•Ä ‡§ñ‡•á‡§§‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§ï‡•§",
          bn: "‡¶π‡ßç‡¶Ø‡¶æ‡¶≤‡ßã! ‡¶Ü‡¶Æ‡¶ø ‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡¶æ ‡¶è‡¶Ü‡¶á, ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶π‡ßÅ-‡¶≠‡¶æ‡¶∑‡¶ø‡¶ï ‡¶ï‡ßÉ‡¶∑‡¶ø ‡¶∏‡¶π‡¶ï‡¶æ‡¶∞‡ßÄ‡•§",
          ta: "‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç! ‡Æ®‡Ææ‡Æ©‡Øç ‡Æ™‡Ææ‡Æ∞‡Øç‡ÆÆ‡Ææ ‡Æè‡Æê, ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Æø‡Æ©‡Øç ‡Æ™‡Æ©‡Øç‡ÆÆ‡Øä‡Æ¥‡Æø ‡Æµ‡Æø‡Æµ‡Æö‡Ææ‡ÆØ ‡Æâ‡Æ§‡Æµ‡Æø‡ÆØ‡Ææ‡Æ≥‡Æ∞‡Øç.",
          te: "‡∞π‡∞≤‡±ã! ‡∞®‡±á‡∞®‡±Å ‡∞´‡∞æ‡∞∞‡±ç‡∞Æ‡∞æ AI, ‡∞Æ‡±Ä ‡∞¨‡∞π‡±Å‡∞≠‡∞æ‡∞∑‡∞æ ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡±Å.",
          mr: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§Æ‡•Ä ‡§´‡§æ‡§∞‡•ç‡§Æ‡§æ ‡§è‡§Ü‡§Ø, ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§¨‡§π‡•Å‡§≠‡§æ‡§∑‡§ø‡§ï ‡§∂‡•á‡§§‡•Ä ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.",
          kn: "‡≤®‡≤Æ‡≤∏‡≥ç‡≤ï‡≤æ‡≤∞! ‡≤®‡≤æ‡≤®‡≥Å ‡≤´‡≤æ‡≤∞‡≥ç‡≤Æ‡≤æ ‡≤é‡≤ê, ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≤π‡≥Å‡≤≠‡≤æ‡≤∑‡≤æ ‡≤ï‡≥É‡≤∑‡≤ø ‡≤∏‡≤π‡≤æ‡≤Ø‡≤ï.",
          ml: "‡¥®‡¥Æ‡¥∏‡µç‡¥ï‡¥æ‡¥∞‡¥Ç! ‡¥û‡¥æ‡µª ‡¥´‡¥æ‡µº‡¥Æ ‡¥é‡¥ê, ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥¨‡¥π‡µÅ‡¥≠‡¥æ‡¥∑‡¥æ ‡¥ï‡µÉ‡¥∑‡¥ø ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø.",
          gu: "‡™®‡™Æ‡™∏‡´ç‡™§‡´á! ‡™π‡´Å‡™Ç ‡™´‡™æ‡™∞‡´ç‡™Æ‡™æ ‡™è‡™Ü‡™á, ‡™§‡™Æ‡™æ‡™∞‡´ã ‡™¨‡™π‡´Å‡™≠‡™æ‡™∑‡´Ä ‡™ñ‡´á‡™§‡´Ä ‡™∏‡™π‡™æ‡™Ø‡™ï ‡™õ‡´Å‡™Ç.",
          pa: "‡®∏‡®§ ‡®∏‡©ç‡®∞‡©Ä ‡®Ö‡®ï‡®æ‡®≤! ‡®Æ‡©à‡®Ç ‡®´‡®æ‡®∞‡®Æ‡®æ AI, ‡®§‡©Å‡®π‡®æ‡®°‡®æ ‡®¨‡®π‡©Å‡®≠‡®æ‡®∂‡©Ä ‡®ñ‡©á‡®§‡©Ä ‡®∏‡®π‡®æ‡®á‡®ï ‡®π‡®æ‡®Ç‡•§",
          ur: "ÿßŸÑÿ≥ŸÑÿßŸÖ ÿπŸÑ€å⁄©ŸÖ! ŸÖ€å⁄∫ ŸÅÿßÿ±ŸÖÿß ÿß€í ÿ¢ÿ¶€å €ÅŸà⁄∫ÿå ÿ¢Ÿæ ⁄©ÿß ⁄©ÿ´€åÿ± ŸÑÿ≥ÿßŸÜ€å ÿ≤ÿ±ÿπ€å ŸÖÿπÿßŸàŸÜ€î",
        },
        imageUploaded: {
          en: "üì∑ Image uploaded successfully!",
          hi: "üì∑ ‡§ö‡§ø‡§§‡•ç‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü!",
          bn: "üì∑ ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!",
          ta: "üì∑ ‡Æ™‡Æü‡ÆÆ‡Øç ‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Æ∞‡ÆÆ‡Ææ‡Æï ‡Æ™‡Æ§‡Æø‡Æµ‡Øá‡Æ±‡Øç‡Æ±‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ!",
          te: "üì∑ ‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞Ç ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞Ö‡∞™‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞Ö‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø!",
          mr: "üì∑ ‡§™‡•ç‡§∞‡§§‡§ø‡§Æ‡§æ ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡•Ä!",
          kn: "üì∑ ‡≤ö‡≤ø‡≤§‡≥ç‡≤∞ ‡≤Ø‡≤∂‡≤∏‡≥ç‡≤µ‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø ‡≤Ö‡≤™‡≥ç‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü!",
          ml: "üì∑ ‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥Ç ‡¥µ‡¥ø‡¥ú‡¥Ø‡¥ï‡¥∞‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥Ö‡¥™‡µç‚Äå‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡µÅ!",
          gu: "üì∑ ‡™õ‡™¨‡´Ä ‡™∏‡™´‡™≥‡™§‡™æ‡™™‡´Ç‡™∞‡´ç‡™µ‡™ï ‡™Ö‡™™‡™≤‡´ã‡™° ‡™•‡™à!",
          pa: "üì∑ ‡®§‡®∏‡®µ‡©Ä‡®∞ ‡®∏‡®´‡®≤‡®§‡®æ‡®™‡©Ç‡®∞‡®µ‡®ï ‡®Ö‡®™‡®≤‡©ã‡®° ‡®π‡©ã ‡®ó‡®à!",
          ur: "üì∑ ÿ™ÿµŸà€åÿ± ⁄©ÿßŸÖ€åÿßÿ®€å ÿ≥€í ÿßŸæ ŸÑŸà⁄à €ÅŸà ⁄Øÿ¶€å!",
        },
        voiceHeard: {
          en: "ü§ñ Got it! You said:",
          hi: "ü§ñ ‡§∏‡§Æ‡§ù ‡§ó‡§Ø‡§æ! ‡§Ü‡§™‡§®‡•á ‡§ï‡§π‡§æ:",
          bn: "ü§ñ ‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶¨‡¶≤‡ßá‡¶õ‡ßá‡¶®:",
          ta: "ü§ñ ‡Æ™‡ØÅ‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Øá‡Æ©‡Øç! ‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æö‡Øä‡Æ©‡Øç‡Æ©‡Æ§‡ØÅ:",
          te: "ü§ñ ‡∞Ö‡∞∞‡±ç‡∞•‡∞Æ‡±à‡∞Ç‡∞¶‡∞ø! ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞ö‡±Ü‡∞™‡±ç‡∞™‡∞ø‡∞Ç‡∞¶‡∞ø:",
          mr: "ü§ñ ‡§∏‡§Æ‡§ú‡§≤‡•á! ‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä ‡§Æ‡•ç‡§π‡§£‡§æ‡§≤‡§æ‡§§:",
          kn: "ü§ñ ‡≤Ö‡≤∞‡≥ç‡≤•‡≤µ‡≤æ‡≤Ø‡≤ø‡≤§‡≥Å! ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤π‡≥á‡≤≥‡≤ø‡≤¶‡≥ç‡≤¶‡≥Å:",
          ml: "ü§ñ ‡¥Æ‡¥®‡¥∏‡µç‡¥∏‡¥ø‡¥≤‡¥æ‡¥ï‡µç‡¥ï‡¥ø! ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ ‡¥™‡¥±‡¥û‡µç‡¥û‡¥§‡µç:",
          gu: "ü§ñ ‡™∏‡™Æ‡™ú‡™æ‡™Ø‡´Å‡™Ç! ‡™§‡™Æ‡´á ‡™ï‡™π‡´ç‡™Ø‡´Å‡™Ç:",
          pa: "ü§ñ ‡®∏‡®Æ‡®ù ‡®Ü ‡®ó‡®ø‡®Ü! ‡®§‡©Å‡®∏‡©Ä‡®Ç ‡®ï‡®ø‡®π‡®æ:",
          ur: "ü§ñ ÿ≥ŸÖÿ¨⁄æ ⁄Ø€åÿß! ÿ¢Ÿæ ŸÜ€í ⁄©€Åÿß:",
        },
        defaultResponse: {
          en: "üå± This is a sample response.",
          hi: "üå± ‡§Ø‡§π ‡§è‡§ï ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§â‡§§‡•ç‡§§‡§∞ ‡§π‡•à‡•§",
          bn: "üå± ‡¶è‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ ‡¶â‡¶§‡ßç‡¶§‡¶∞‡•§",
          ta: "üå± ‡Æá‡Æ§‡ØÅ ‡Æí‡Æ∞‡ØÅ ‡Æé‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡Ææ‡Æü‡Øç‡Æü‡ØÅ ‡Æ™‡Æ§‡Æø‡Æ≤‡Øç.",
          te: "üå± ‡∞á‡∞¶‡∞ø ‡∞í‡∞ï ‡∞â‡∞¶‡∞æ‡∞π‡∞∞‡∞£ ‡∞∏‡∞Æ‡∞æ‡∞ß‡∞æ‡∞®‡∞Ç.",
          mr: "üå± ‡§π‡§æ ‡§è‡§ï ‡§â‡§¶‡§æ‡§π‡§∞‡§£‡§æ‡§∞‡•ç‡§• ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡§æ‡§¶ ‡§Ü‡§π‡•á.",
          kn: "üå± ‡≤á‡≤¶‡≥Å ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤â‡≤¶‡≤æ‡≤π‡≤∞‡≤£‡≥Ü‡≤Ø ‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≥Ü.",
          ml: "üå± ‡¥á‡¥§‡µç ‡¥í‡¥∞‡µÅ ‡¥â‡¥¶‡¥æ‡¥π‡¥∞‡¥£ ‡¥™‡µç‡¥∞‡¥§‡¥ø‡¥ï‡¥∞‡¥£‡¥Æ‡¥æ‡¥£‡µç.",
          gu: "üå± ‡™Ü ‡™è‡™ï ‡™â‡™¶‡™æ‡™π‡™∞‡™£ ‡™™‡´ç‡™∞‡™§‡™ø‡™≠‡™æ‡™µ ‡™õ‡´á.",
          pa: "üå± ‡®á‡®π ‡®á‡©±‡®ï ‡®â‡®¶‡®æ‡®π‡®∞‡®® ‡®ú‡®µ‡®æ‡®¨ ‡®π‡©à‡•§",
          ur: "üå± €å€Å ÿß€å⁄© ŸÖÿ´ÿßŸÑ ⁄©ÿß ÿ¨Ÿàÿßÿ® €Å€í€î",
        },
      };

      const langMap = {
        en: "en-IN",
        hi: "hi-IN",
        bn: "bn-IN",
        ta: "ta-IN",
        te: "te-IN",
        mr: "mr-IN",
        kn: "kn-IN",
        ml: "ml-IN",
        gu: "gu-IN",
        pa: "pa-IN",
        ur: "ur-IN",
      };

      const chatBox = document.getElementById("chatbot-messages");
      const inputBox = document.getElementById("user-input");

      document.getElementById("send-button").addEventListener("click", sendMessage);
      document.getElementById("voice-button").addEventListener("click", startVoiceRecognition);
      document.getElementById("image-upload").addEventListener("change", handleImageUpload);
      document.getElementById("language-select").addEventListener("change", setGreeting);

      function setGreeting() {
        appendMessage(botMessages.greeting[getLang()], "bot");
      }

      function getLang() {
        return document.getElementById("language-select").value;
      }

      function sendMessage() {
        const text = inputBox.value.trim();
        if (!text) return;
        appendMessage(text, "user");
        inputBox.value = "";
        setTimeout(() => appendMessage(botMessages.defaultResponse[getLang()], "bot"), 700);
      }

      function handleImageUpload(e) {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function (evt) {
          appendImageMessage(evt.target.result, botMessages.imageUploaded[getLang()]);
        };
        reader.readAsDataURL(file);
      }

      // ‚úÖ CLEAN VOICE FUNCTION (no if/else)
      function startVoiceRecognition() {
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (!SpeechRecognition) {
          appendMessage("‚ö†Ô∏è Sorry, voice recognition is not supported in your browser.", "bot");
          return;
        }

        const recognition = new SpeechRecognition();
        recognition.lang = langMap[getLang()] || "en-IN";
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;

        recognition.start();

        recognition.onresult = function (e) {
          const transcript = e.results[0][0].transcript;
          appendMessage("üé§ " + transcript, "user");
          setTimeout(
            () => appendMessage(botMessages.voiceHeard[getLang()] + " " + transcript, "bot"),
            700
          );
        };

        recognition.onend = function () {
          console.log("Voice recognition ended.");
        };

        recognition.onerror = function (e) {
          const errorMessages = {
            "not-allowed": "‚ö†Ô∏è Please allow microphone access to use voice search.",
            "no-speech": "‚ö†Ô∏è No speech detected. Try again.",
            network: "‚ö†Ô∏è Network error. Check your internet connection.",
          };
          appendMessage(errorMessages[e.error] || "‚ö†Ô∏è Voice recognition error.", "bot");
        };
      }

      function appendMessage(text, sender) {
        const div = document.createElement("div");
        div.classList.add("message", sender + "-message");
        div.textContent = text;
        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;
      }

      function appendImageMessage(imgData, text) {
        const div = document.createElement("div");
        div.classList.add("message", "bot-message");

        const msg = document.createElement("div");
        msg.textContent = text;
        div.appendChild(msg);

        const img = document.createElement("img");
        img.src = imgData;
        div.appendChild(img);

        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;
      }

      // Initialize greeting
      setGreeting();
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ЁЯМ╛ FARMA AI: Your Multilingual Farming Assistant</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f0f4f7;
        background-image: url("https://i.imgur.com/gK9tHqL.jpeg");
        background-size: cover;
        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
      }
      .chatbot-container {
        width: 100%;
        max-width: 450px;
        height: 600px;
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      .chatbot-header {
        background-color: #3b823b;
        color: white;
        padding: 18px;
        text-align: center;
        font-size: 1.2em;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .language-select {
        padding: 5px;
        border-radius: 8px;
        border: 1px solid #c5d8a8;
        background-color: #e6f3e6;
        color: #3b823b;
        font-size: 0.8em;
        cursor: pointer;
      }
      .chatbot-messages {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      .message {
        max-width: 80%;
        padding: 12px;
        border-radius: 20px;
        line-height: 1.4;
      }
      .bot-message {
        background-color: #e6f3e6;
        color: #333;
        align-self: flex-start;
      }
      .user-message {
        background-color: #d1e7dd;
        color: #333;
        align-self: flex-end;
      }
      .image-preview-container img {
        max-width: 100%;
        border-radius: 10px;
        border: 1px solid #ddd;
        margin-top: 8px;
      }
      .chatbot-input {
        display: flex;
        padding: 15px;
        border-top: 1px solid #e0e0e0;
        background-color: #f7f7f7;
        gap: 10px;
      }
      #user-input {
        flex: 1;
        border: 1px solid #ccc;
        border-radius: 25px;
        padding: 12px 18px;
        outline: none;
      }
      .input-buttons {
        display: flex;
        gap: 10px;
      }
      .input-buttons button,
      .file-upload-label {
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        font-size: 1.2em;
      }
      #image-upload {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="chatbot-container">
      <div class="chatbot-header">
        <h3>FARMA AI ЁЯдЦ</h3>
        <select class="language-select" id="language-select">
          <option value="en" selected>English</option>
          <option value="hi">рд╣рд┐рдиреНрджреА (Hindi)</option>
          <option value="bn">ржмрж╛ржВрж▓рж╛ (Bengali)</option>
          <option value="ta">родрооро┐ро┤рпН (Tamil)</option>
          <option value="te">р░др▒Жр░▓р▒Бр░Чр▒Б (Telugu)</option>
          <option value="mr">рдорд░рд╛рдареА (Marathi)</option>
          <option value="kn">р▓Хр▓ир│Нр▓ир▓б (Kannada)</option>
          <option value="ml">р┤ор┤▓р┤пр┤╛р┤│р┤В (Malayalam)</option>
          <option value="gu">ркЧрлБркЬрк░рк╛ркдрлА (Gujarati)</option>
          <option value="pa">рикрй░риЬри╛римрйА (Punjabi)</option>
          <option value="ur">╪з╪▒╪п┘И (Urdu)</option>
        </select>
      </div>
      <div class="chatbot-messages" id="chatbot-messages"></div>
      <div class="chatbot-input">
        <input type="text" id="user-input" placeholder="Ask a question or describe a problem..." />
        <div class="input-buttons">
          <button id="voice-button" title="Start voice search">ЁЯОд</button>
          <input type="file" id="image-upload" accept="image/*" />
          <label for="image-upload" class="file-upload-label" title="Upload an image">ЁЯЦ╝</label>
          <button id="send-button" title="Send message">тЮб</button>
        </div>
      </div>
    </div>

    <script>
      const botMessages = {
        greeting: {
          en: "Hello! I am FARMA AI, your multilingual farming assistant.",
          hi: "рдирдорд╕реНрддреЗ! рдореИрдВ рдлрд╛рд░реНрдорд╛ рдПрдЖрдИ рд╣реВрдБ, рдЖрдкрдХрд╛ рдмрд╣реБрднрд╛рд╖реА рдЦреЗрддреА рд╕рд╣рд╛рдпрдХред",
          bn: "рж╣рзНржпрж╛рж▓рзЛ! ржЖржорж┐ ржлрж╛рж░рзНржорж╛ ржПржЖржЗ, ржЖржкржирж╛рж░ ржмрж╣рзБ-ржнрж╛рж╖рж┐ржХ ржХрзГрж╖рж┐ рж╕рж╣ржХрж╛рж░рзАред",
          ta: "ро╡рогроХрпНроХроорпН! роиро╛ройрпН рокро╛ро░рпНрооро╛ роПроР, роЙроЩрпНроХро│ро┐ройрпН рокройрпНроорпКро┤ро┐ ро╡ро┐ро╡роЪро╛роп роЙродро╡ро┐ропро╛ро│ро░рпН.",
          te: "р░╣р░▓р▒Л! р░ир▒Зр░ир▒Б р░лр░╛р░░р▒Нр░ор░╛ AI, р░ор▒А р░мр░╣р▒Бр░нр░╛р░╖р░╛ р░╡р▒Нр░пр░╡р░╕р░╛р░п р░╕р░╣р░╛р░пр░Хр▒Бр░бр▒Б.",
          mr: "рдирдорд╕реНрдХрд╛рд░! рдореА рдлрд╛рд░реНрдорд╛ рдПрдЖрдп, рддреБрдордЪрд╛ рдмрд╣реБрднрд╛рд╖рд┐рдХ рд╢реЗрддреА рд╕рд╣рд╛рдпреНрдпрдХ рдЖрд╣реЗ.",
          kn: "р▓ир▓ор▓╕р│Нр▓Хр▓╛р▓░! р▓ир▓╛р▓ир│Б р▓лр▓╛р▓░р│Нр▓ор▓╛ р▓Ор▓Р, р▓ир▓┐р▓ор│Нр▓о р▓мр▓╣р│Бр▓нр▓╛р▓╖р▓╛ р▓Хр│Гр▓╖р▓┐ р▓╕р▓╣р▓╛р▓пр▓Х.",
          ml: "р┤ир┤ор┤╕р╡Нр┤Хр┤╛р┤░р┤В! р┤Юр┤╛р╡╗ р┤лр┤╛р╡╝р┤о р┤Ор┤Р, р┤ир┤┐р┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤мр┤╣р╡Бр┤нр┤╛р┤╖р┤╛ р┤Хр╡Гр┤╖р┤┐ р┤╕р┤╣р┤╛р┤пр┤┐.",
          gu: "ркиркорк╕рлНркдрлЗ! рк╣рлБркВ рклрк╛рк░рлНркорк╛ ркПркЖркЗ, ркдркорк╛рк░рлЛ ркмрк╣рлБркнрк╛рк╖рлА ркЦрлЗркдрлА рк╕рк╣рк╛ркпркХ ркЫрлБркВ.",
          pa: "ри╕рид ри╕рйНри░рйА риЕриХри╛ри▓! риорйИриВ рилри╛ри░риори╛ AI, ридрйБри╣ри╛рибри╛ римри╣рйБринри╛ри╢рйА риЦрйЗридрйА ри╕ри╣ри╛риЗриХ ри╣ри╛риВред",
          ur: "╪з┘Д╪│┘Д╪з┘Е ╪╣┘Д█М┌й┘Е! ┘Е█М┌║ ┘Б╪з╪▒┘Е╪з ╪з█Т ╪в╪ж█М █Б┘И┌║╪М ╪в┘╛ ┌й╪з ┌й╪л█М╪▒ ┘Д╪│╪з┘Ж█М ╪▓╪▒╪╣█М ┘Е╪╣╪з┘И┘Ж█Ф",
        },
        imageUploaded: {
          en: "ЁЯУ╖ Image uploaded successfully!",
          hi: "ЁЯУ╖ рдЪрд┐рддреНрд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЕрдкрд▓реЛрдб рд╣реБрдЖ!",
          bn: "ЁЯУ╖ ржЫржмрж┐ рж╕ржлрж▓ржнрж╛ржмрзЗ ржЖржкрж▓рзЛржб рж╣ржпрж╝рзЗржЫрзЗ!",
          ta: "ЁЯУ╖ рокроЯроорпН ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ рокродро┐ро╡рпЗро▒рпНро▒рокрпНрокроЯрпНроЯродрпБ!",
          te: "ЁЯУ╖ р░Ър░┐р░др▒Нр░░р░В р░╡р░┐р░Ьр░пр░╡р░Вр░др░Вр░Чр░╛ р░Ер░кр▒НтАМр░▓р▒Лр░бр▒Н р░Ер░пр░┐р░Вр░жр░┐!",
          mr: "ЁЯУ╖ рдкреНрд░рддрд┐рдорд╛ рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рдЕрдкрд▓реЛрдб рдЭрд╛рд▓реА!",
          kn: "ЁЯУ╖ р▓Ър▓┐р▓др│Нр▓░ р▓пр▓╢р▓╕р│Нр▓╡р▓┐р▓пр▓╛р▓Чр▓┐ р▓Ер▓кр│Нр▓▓р│Лр▓бр│Н р▓ор▓╛р▓бр▓▓р▓╛р▓Чр▓┐р▓жр│Ж!",
          ml: "ЁЯУ╖ р┤Ър┤┐р┤др╡Нр┤░р┤В р┤╡р┤┐р┤Ьр┤пр┤Хр┤░р┤ор┤╛р┤пр┤┐ р┤Ер┤кр╡НтАМр┤▓р╡Лр┤бр╡Н р┤Ър╡Жр┤пр╡Нр┤др╡Б!",
          gu: "ЁЯУ╖ ркЫркмрлА рк╕рклрк│ркдрк╛рккрлВрк░рлНрк╡ркХ ркЕрккрк▓рлЛркб ркеркИ!",
          pa: "ЁЯУ╖ ридри╕ри╡рйАри░ ри╕рилри▓ридри╛рикрйВри░ри╡риХ риЕрикри▓рйЛриб ри╣рйЛ риЧриИ!",
          ur: "ЁЯУ╖ ╪к╪╡┘И█М╪▒ ┌й╪з┘Е█М╪з╪и█М ╪│█Т ╪з┘╛ ┘Д┘И┌И █Б┘И ┌п╪ж█М!",
        },
        voiceHeard: {
          en: "ЁЯдЦ Got it! You said:",
          hi: "ЁЯдЦ рд╕рдордЭ рдЧрдпрд╛! рдЖрдкрдиреЗ рдХрд╣рд╛:",
          bn: "ЁЯдЦ ржмрзБржЭрзЗржЫрж┐! ржЖржкржирж┐ ржмрж▓рзЗржЫрзЗржи:",
          ta: "ЁЯдЦ рокрпБро░ро┐роирпНродрпБроХрпКрогрпНроЯрпЗройрпН! роирпАроЩрпНроХро│рпН роЪрпКройрпНройродрпБ:",
          te: "ЁЯдЦ р░Ер░░р▒Нр░ер░ор▒Ир░Вр░жр░┐! р░ор▒Ар░░р▒Б р░Ър▒Жр░кр▒Нр░кр░┐р░Вр░жр░┐:",
          mr: "ЁЯдЦ рд╕рдордЬрд▓реЗ! рддреБрдореНрд╣реА рдореНрд╣рдгрд╛рд▓рд╛рдд:",
          kn: "ЁЯдЦ р▓Ер▓░р│Нр▓ер▓╡р▓╛р▓пр▓┐р▓др│Б! р▓ир│Ар▓╡р│Б р▓╣р│Зр▓│р▓┐р▓жр│Нр▓жр│Б:",
          ml: "ЁЯдЦ р┤ор┤ир┤╕р╡Нр┤╕р┤┐р┤▓р┤╛р┤Хр╡Нр┤Хр┤┐! р┤ир┤┐р┤Щр╡Нр┤Щр╡╛ р┤кр┤▒р┤Юр╡Нр┤Юр┤др╡Н:",
          gu: "ЁЯдЦ рк╕ркоркЬрк╛ркпрлБркВ! ркдркорлЗ ркХрк╣рлНркпрлБркВ:",
          pa: "ЁЯдЦ ри╕риориЭ риЖ риЧри┐риЖ! ридрйБри╕рйАриВ риХри┐ри╣ри╛:",
          ur: "ЁЯдЦ ╪│┘Е╪м┌╛ ┌п█М╪з! ╪в┘╛ ┘Ж█Т ┌й█Б╪з:",
        },
        defaultResponse: {
          en: "ЁЯМ▒ This is a sample response.",
          hi: "ЁЯМ▒ рдпрд╣ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдЙрддреНрддрд░ рд╣реИред",
          bn: "ЁЯМ▒ ржПржЯрж┐ ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг ржЙрждрзНрждрж░ред",
          ta: "ЁЯМ▒ роЗродрпБ роТро░рпБ роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпБ рокродро┐ро▓рпН.",
          te: "ЁЯМ▒ р░Зр░жр░┐ р░Тр░Х р░Йр░жр░╛р░╣р░░р░г р░╕р░ор░╛р░зр░╛р░ир░В.",
          mr: "ЁЯМ▒ рд╣рд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде рдкреНрд░рддрд┐рд╕рд╛рдж рдЖрд╣реЗ.",
          kn: "ЁЯМ▒ р▓Зр▓жр│Б р▓Тр▓Вр▓жр│Б р▓Йр▓жр▓╛р▓╣р▓░р▓гр│Жр▓п р▓кр│Нр▓░р▓др▓┐р▓Хр│Нр▓░р▓┐р▓пр│Ж.",
          ml: "ЁЯМ▒ р┤Зр┤др╡Н р┤Тр┤░р╡Б р┤Йр┤жр┤╛р┤╣р┤░р┤г р┤кр╡Нр┤░р┤др┤┐р┤Хр┤░р┤гр┤ор┤╛р┤гр╡Н.",
          gu: "ЁЯМ▒ ркЖ ркПркХ ркЙркжрк╛рк╣рк░ркг рккрлНрк░ркдрк┐ркнрк╛рк╡ ркЫрлЗ.",
          pa: "ЁЯМ▒ риЗри╣ риЗрй▒риХ риЙрижри╛ри╣ри░рии риЬри╡ри╛рим ри╣рйИред",
          ur: "ЁЯМ▒ █М█Б ╪з█М┌й ┘Е╪л╪з┘Д ┌й╪з ╪м┘И╪з╪и █Б█Т█Ф",
        },
      };

      const langMap = {
        en: "en-IN",
        hi: "hi-IN",
        bn: "bn-IN",
        ta: "ta-IN",
        te: "te-IN",
        mr: "mr-IN",
        kn: "kn-IN",
        ml: "ml-IN",
        gu: "gu-IN",
        pa: "pa-IN",
        ur: "ur-IN",
      };

      const chatBox = document.getElementById("chatbot-messages");
      const inputBox = document.getElementById("user-input");

      document.getElementById("send-button").addEventListener("click", sendMessage);
      document.getElementById("voice-button").addEventListener("click", startVoiceRecognition);
      document.getElementById("image-upload").addEventListener("change", handleImageUpload);
      document.getElementById("language-select").addEventListener("change", setGreeting);

      function setGreeting() {
        appendMessage(botMessages.greeting[getLang()], "bot");
      }

      function getLang() {
        return document.getElementById("language-select").value;
      }

      function sendMessage() {
        const text = inputBox.value.trim();
        if (!text) return;
        appendMessage(text, "user");
        inputBox.value = "";
        setTimeout(() => appendMessage(botMessages.defaultResponse[getLang()], "bot"), 700);
      }

      function handleImageUpload(e) {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function (evt) {
          appendImageMessage(evt.target.result, botMessages.imageUploaded[getLang()]);
        };
        reader.readAsDataURL(file);
      }

      // тЬЕ CLEAN VOICE FUNCTION (no if/else)
      function startVoiceRecognition() {
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (!SpeechRecognition) {
          appendMessage("тЪая╕П Sorry, voice recognition is not supported in your browser.", "bot");
          return;
        }

        const recognition = new SpeechRecognition();
        recognition.lang = langMap[getLang()] || "en-IN";
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;

        recognition.start();

        recognition.onresult = function (e) {
          const transcript = e.results[0][0].transcript;
          appendMessage("ЁЯОд " + transcript, "user");
          setTimeout(
            () => appendMessage(botMessages.voiceHeard[getLang()] + " " + transcript, "bot"),
            700
          );
        };

        recognition.onend = function () {
          console.log("Voice recognition ended.");
        };

        recognition.onerror = function (e) {
          const errorMessages = {
            "not-allowed": "тЪая╕П Please allow microphone access to use voice search.",
            "no-speech": "тЪая╕П No speech detected. Try again.",
            network: "тЪая╕П Network error. Check your internet connection.",
          };
          appendMessage(errorMessages[e.error] || "тЪая╕П Voice recognition error.", "bot");
        };
      }

      function appendMessage(text, sender) {
        const div = document.createElement("div");
        div.classList.add("message", sender + "-message");
        div.textContent = text;
        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;
      }

      function appendImageMessage(imgData, text) {
        const div = document.createElement("div");
        div.classList.add("message", "bot-message");

        const msg = document.createElement("div");
        msg.textContent = text;
        div.appendChild(msg);

        const img = document.createElement("img");
        img.src = imgData;
        div.appendChild(img);

        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;
      }

      // Initialize greeting
      setGreeting();
    </script>
  </body>
</html>
